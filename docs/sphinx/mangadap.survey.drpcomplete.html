

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>mangadap.survey.drpcomplete module &mdash; mangadap 2.2.2 documentation</title>
  

  
  
  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  

  

  
        <link rel="index" title="Index"
              href="genindex.html"/>
        <link rel="search" title="Search" href="search.html"/>
    <link rel="top" title="mangadap 2.2.2 documentation" href="index.html"/>
        <link rel="up" title="mangadap.survey package" href="mangadap.survey.html"/>
        <link rel="next" title="mangadap.survey.manga_dap module" href="mangadap.survey.manga_dap.html"/>
        <link rel="prev" title="mangadap.survey.dapall module" href="mangadap.survey.dapall.html"/> 

  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="index.html" class="icon icon-home"> mangadap
          

          
          </a>

          
            
            
              <div class="version">
                2.2.2
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="mangadap.html">mangadap package</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="mangadap.html#subpackages">Subpackages</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="mangadap.config.html">mangadap.config package</a></li>
<li class="toctree-l3"><a class="reference internal" href="mangadap.contrib.html">mangadap.contrib package</a></li>
<li class="toctree-l3"><a class="reference internal" href="mangadap.par.html">mangadap.par package</a></li>
<li class="toctree-l3"><a class="reference internal" href="mangadap.proc.html">mangadap.proc package</a></li>
<li class="toctree-l3 current"><a class="reference internal" href="mangadap.survey.html">mangadap.survey package</a><ul class="current">
<li class="toctree-l4 current"><a class="reference internal" href="mangadap.survey.html#submodules">Submodules</a></li>
<li class="toctree-l4"><a class="reference internal" href="mangadap.survey.html#module-mangadap.survey">Module contents</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="mangadap.tests.html">mangadap.tests package</a></li>
<li class="toctree-l3"><a class="reference internal" href="mangadap.util.html">mangadap.util package</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="mangadap.html#submodules">Submodules</a></li>
<li class="toctree-l2"><a class="reference internal" href="mangadap.html#module-mangadap">Module contents</a></li>
</ul>
</li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">mangadap</a>
        
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
          <li><a href="mangadap.html">mangadap package</a> &raquo;</li>
        
          <li><a href="mangadap.survey.html">mangadap.survey package</a> &raquo;</li>
        
      <li>mangadap.survey.drpcomplete module</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/mangadap.survey.drpcomplete.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="module-mangadap.survey.drpcomplete">
<span id="mangadap-survey-drpcomplete-module"></span><h1>mangadap.survey.drpcomplete module<a class="headerlink" href="#module-mangadap.survey.drpcomplete" title="Permalink to this headline">Â¶</a></h1>
<p>Defines a class used to produce and provide an interface for data
required to create the input <a class="reference external" href="http://www.sdss.org/dr12/software/par/">SDSS parameter files</a> for the DAP.</p>
<p>The drpcomplete file/data is primarily required for the survey-level
execution of the <a class="reference external" href="https://trac.sdss.org/wiki/MANGA/TRM/TRM_ActiveDev/dap/Summary/Utah">DAP at Utah</a>.  However, it does provide useful
information regarding the completed DRP files, and it can be used to
create DAP par files.</p>
<p>Preferrably, however, one should get this information from the DRPall,
or forthcoming DAPall, file for a given MPL.</p>
<p>Until further documented here, the description of the <a class="reference external" href="https://trac.sdss.org/wiki/MANGA/TRM/TRM_ActiveDev/dap/Summary/parFile">DAP par
file</a> is available in the SDSS-IV/MaNGA <a class="reference external" href="https://trac.sdss.org/wiki/MANGA/TRM/TRM_ActiveDev">Technical Reference Manual</a>.</p>
<dl class="docutils">
<dt><em>License</em>:</dt>
<dd><dl class="first last docutils">
<dt>Copyright (c) 2015, SDSS-IV/MaNGA Pipeline Group</dt>
<dd>Licensed under BSD 3-clause license - see LICENSE.rst</dd>
</dl>
</dd>
<dt><em>Source location</em>:</dt>
<dd>$MANGADAP_DIR/python/mangadap/survey/drpcomplete.py</dd>
<dt><em>Imports and python version compliance</em>:</dt>
<dd><div class="first last highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">__future__</span> <span class="k">import</span> <span class="n">division</span>
<span class="kn">from</span> <span class="nn">__future__</span> <span class="k">import</span> <span class="n">print_function</span>
<span class="kn">from</span> <span class="nn">__future__</span> <span class="k">import</span> <span class="n">absolute_import</span>
<span class="kn">from</span> <span class="nn">__future__</span> <span class="k">import</span> <span class="n">unicode_literals</span>

<span class="kn">import</span> <span class="nn">sys</span>
<span class="k">if</span> <span class="n">sys</span><span class="o">.</span><span class="n">version</span> <span class="o">&gt;</span> <span class="s1">&#39;3&#39;</span><span class="p">:</span>
    <span class="n">long</span> <span class="o">=</span> <span class="nb">int</span>

<span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">numpy</span>
<span class="kn">import</span> <span class="nn">warnings</span>
<span class="kn">from</span> <span class="nn">astropy.io</span> <span class="k">import</span> <span class="n">fits</span>
<span class="kn">import</span> <span class="nn">astropy.constants</span>
<span class="kn">from</span> <span class="nn">pydl.pydlutils.yanny</span> <span class="k">import</span> <span class="n">yanny</span>

<span class="kn">from</span> <span class="nn">..config</span> <span class="k">import</span> <span class="n">defaults</span>
<span class="kn">from</span> <span class="nn">.</span> <span class="k">import</span> <span class="n">drpfits</span>
<span class="kn">from</span> <span class="nn">..util.parser</span> <span class="k">import</span> <span class="n">arginp_to_list</span><span class="p">,</span> <span class="n">list_to_csl_string</span><span class="p">,</span> <span class="n">parse_drp_file_name</span>
<span class="kn">from</span> <span class="nn">..util.exception_tools</span> <span class="k">import</span> <span class="n">print_frame</span>
</pre></div>
</div>
</dd>
<dt><em>Class usage examples</em>:</dt>
<dd>Add some usage comments here!</dd>
<dt><em>Revision history</em>:</dt>
<dd><div class="first last line-block">
<div class="line"><strong>20 Nov 2014</strong>: Started implementation by K. Westfall (KBW)</div>
<div class="line"><strong>01 Dec 2014</strong>: (KBW) Committed to SVN</div>
<div class="line"><strong>12 Jan 2015</strong>: (KBW) Allow for use of plateTargets file using yanny.py</div>
<div class="line"><strong>19 Mar 2015</strong>: (KBW) Adjustments for changes to drpfile and
drpfile_list.  Now always sets the names of the NSA catalogs and
the plateTargets files; added the nsa_catid.  Changed drppath to
redux_path.  Added catid and catindx to output file.  Major
change to matching when using NSA catalog(s).  Imports full
<a class="reference internal" href="mangadap.drpfits.html#module-mangadap.drpfits" title="mangadap.drpfits"><code class="xref py py-class docutils literal notranslate"><span class="pre">mangadap.drpfits</span></code></a> and <code class="xref py py-class docutils literal notranslate"><span class="pre">mangadap.dapfile</span></code> classes,
require a change to the function calls. Changed parameter order
in <code class="xref py py-func docutils literal notranslate"><span class="pre">write()</span></code> and allowed for use of attributes as default.</div>
<div class="line"><strong>20 May 2015</strong>: (KBW) Documentation and Sphinx tests. Prep for
conversion from NSA to TRG nomenclatature, but still need to
make the full conversion.</div>
<div class="line"><strong>21 Aug 2015</strong>: (KBW) Major revisions: File moved from main
module to survey submodule; now only reads plateTargets files,
which have the NSA IDs in them; changed the number of arrays
returned by <a class="reference internal" href="#mangadap.survey.drpcomplete.DRPComplete._match_platetargets" title="mangadap.survey.drpcomplete.DRPComplete._match_platetargets"><code class="xref py py-func docutils literal notranslate"><span class="pre">DRPComplete._match_platetargets()</span></code></a> and the
default values; removed def_veldisp and use_trg from
<a class="reference internal" href="#mangadap.survey.drpcomplete.DRPComplete.update" title="mangadap.survey.drpcomplete.DRPComplete.update"><code class="xref py py-func docutils literal notranslate"><span class="pre">DRPComplete.update()</span></code></a>; added target-catalog version, and
NSAID v1_0_0 to the output fits file; removed options from
<a class="reference internal" href="#mangadap.survey.drpcomplete.DRPComplete.write" title="mangadap.survey.drpcomplete.DRPComplete.write"><code class="xref py py-func docutils literal notranslate"><span class="pre">DRPComplete.write()</span></code></a> related to the target catalogs and
platetargets files (these should be defined by the object);</div>
<div class="line"><strong>27 Aug 2015</strong>: (KBW) Include MANGA_TARGET1 and MANGA_TARGET3 in
data structure, pulled from plateTargets files; NSAID v1_0_0
removed; changed from returning Sersic parameters to elliptical
Petrosian parameters.</div>
<div class="line"><strong>06 Oct 2015</strong>: (KBW) Changed to reading âobject_raâ and
âobject_decâ, instead of target counter parts due to changes in
MaNGA core</div>
<div class="line"><strong>17 Feb 2016</strong>: (KBW) Converted the name of the class to
DRPComplete</div>
<div class="line"><strong>29 Feb 2016</strong>: (KBW) Import drpfits, not drpfile</div>
<div class="line"><strong>13 May 2016</strong>: (KBW) Switch to using <a class="reference external" href="http://pydl.readthedocs.io/en/stable/api/pydl.pydlutils.yanny.yanny.html">pydl.pydlutils.yanny</a>
instead of internal yanny reader.  Incorporated changes to
plateTargets column names defined for DR13.</div>
<div class="line"><strong>02 Aug 2016</strong>: (KBW) Added directory_path input parameter to
<a class="reference internal" href="#mangadap.survey.drpcomplete.DRPComplete" title="mangadap.survey.drpcomplete.DRPComplete"><code class="xref py py-class docutils literal notranslate"><span class="pre">DRPComplete</span></code></a></div>
<div class="line"><strong>01 Mar 2018</strong>: (KBW) Added ability to read the redshift fix
file.</div>
</div>
</dd>
</dl>
<dl class="class">
<dt id="mangadap.survey.drpcomplete.DRPComplete">
<em class="property">class </em><code class="descclassname">mangadap.survey.drpcomplete.</code><code class="descname">DRPComplete</code><span class="sig-paren">(</span><em>platelist=None</em>, <em>ifudesignlist=None</em>, <em>platetargets=None</em>, <em>catid=None</em>, <em>drpver=None</em>, <em>redux_path=None</em>, <em>dapver=None</em>, <em>analysis_path=None</em>, <em>directory_path=None</em>, <em>readonly=False</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/mangadap/survey/drpcomplete.html#DRPComplete"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mangadap.survey.drpcomplete.DRPComplete" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Find DRP files ready for analysis and write parameter files.</p>
<p>This class searches the defined paths for files resulting from the
3D phase of the MaNGA DRP, and then collates the information
necessary to run those files through the MaNGA DAP.  The necessary
parameters are pulled from the provided platetargets files; see
<a class="reference internal" href="#mangadap.survey.drpcomplete.DRPComplete.update" title="mangadap.survey.drpcomplete.DRPComplete.update"><code class="xref py py-func docutils literal notranslate"><span class="pre">update()</span></code></a>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>platelist</strong> (<em>str</em><em> or </em><em>list</em>) â (<strong>Optional</strong>) List of plates to search
for.  Default is to search the full DRP path.</li>
<li><strong>ifudesignlist</strong> (<em>str</em><em> or </em><em>list</em>) â (<strong>Optional</strong>) List of ifudesign to
search for.  Default is to search the full DRP path.</li>
<li><strong>platetargets</strong> (<em>str</em><em> or </em><em>list</em>) â (<strong>Optional</strong>) List of platetargets
files to search through to find any given plate ifudesign
combination.  Default is returned as the first element in
<a class="reference internal" href="mangadap.config.defaults.html#mangadap.config.defaults.default_plate_target_files" title="mangadap.config.defaults.default_plate_target_files"><code class="xref py py-func docutils literal notranslate"><span class="pre">mangadap.config.defaults.default_plate_target_files()</span></code></a>.</li>
<li><strong>catid</strong> (<em>str</em><em> or </em><em>list</em>) â (<strong>Optional</strong>) List of target catalog ID
numbers.  Default is returned as the second element in
<a class="reference internal" href="mangadap.config.defaults.html#mangadap.config.defaults.default_plate_target_files" title="mangadap.config.defaults.default_plate_target_files"><code class="xref py py-func docutils literal notranslate"><span class="pre">mangadap.config.defaults.default_plate_target_files()</span></code></a>.</li>
<li><strong>drpver</strong> (<em>str</em>) â <p>(<strong>Optional</strong>) DRP version, which is:</p>
<blockquote>
<div><ul>
<li>used to define the default DRP redux path</li>
<li>used when declaring a drpfits instance</li>
<li>used in the name of the drpcomplete fits file</li>
<li>included as a header keyword in the output file</li>
</ul>
</div></blockquote>
<p>Default is defined by
<a class="reference internal" href="mangadap.config.defaults.html#mangadap.config.defaults.default_drp_version" title="mangadap.config.defaults.default_drp_version"><code class="xref py py-func docutils literal notranslate"><span class="pre">mangadap.config.defaults.default_drp_version()</span></code></a>.</p>
</li>
<li><strong>redux_path</strong> (<em>str</em>) â (<strong>Optional</strong>) The path to the top level directory
containing the DRP output files; this is the same as the
<em>redux_path</em> in the <a class="reference internal" href="mangadap.drpfits.html#mangadap.drpfits.DRPFits" title="mangadap.drpfits.DRPFits"><code class="xref py py-class docutils literal notranslate"><span class="pre">mangadap.drpfits.DRPFits</span></code></a> class.
Default is defined by
<a class="reference internal" href="mangadap.config.defaults.html#mangadap.config.defaults.default_redux_path" title="mangadap.config.defaults.default_redux_path"><code class="xref py py-func docutils literal notranslate"><span class="pre">mangadap.config.defaults.default_redux_path()</span></code></a>.</li>
<li><strong>dapver</strong> (<em>str</em>) â <p>(<strong>Optional</strong>) DAP version, which is:</p>
<blockquote>
<div><ul>
<li>used to define the default DAP analysis path</li>
<li>included as a header keyword in the output drpcomplete
fits file</li>
</ul>
</div></blockquote>
<p>Default is defined by
<a class="reference internal" href="mangadap.config.defaults.html#mangadap.config.defaults.default_dap_version" title="mangadap.config.defaults.default_dap_version"><code class="xref py py-func docutils literal notranslate"><span class="pre">mangadap.config.defaults.default_dap_version()</span></code></a></p>
</li>
<li><strong>analysis_path</strong> (<em>str</em>) â (<strong>Optional</strong>) The path to the top level
directory for the DAP output files; this is <strong>different</strong>
from the directory_path in the <code class="xref py py-class docutils literal notranslate"><span class="pre">mangadap.dapfile</span></code>
class.  Default is defined by
<a class="reference internal" href="mangadap.config.defaults.html#mangadap.config.defaults.default_analysis_path" title="mangadap.config.defaults.default_analysis_path"><code class="xref py py-func docutils literal notranslate"><span class="pre">mangadap.config.defaults.default_analysis_path()</span></code></a></li>
<li><strong>directory_path</strong> (<em>str</em>) â (<strong>Optional</strong>) Direct path to the output
file produced using
<a class="reference internal" href="mangadap.config.defaults.html#mangadap.config.defaults.default_dap_common_path" title="mangadap.config.defaults.default_dap_common_path"><code class="xref py py-func docutils literal notranslate"><span class="pre">mangadap.config.defaults.default_dap_common_path()</span></code></a></li>
<li><strong>readonly</strong> (<em>bool</em>) â (<strong>Optional</strong>) Flag that the drpcomplete fits
file is only opened for reading, not for updating.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Raises:</th><td class="field-body"><p class="first last"><code class="xref py py-exc docutils literal notranslate"><span class="pre">Exception</span></code> â Raised if user supplies only one of platetargets or
catid instead of both.</p>
</td>
</tr>
</tbody>
</table>
<dl class="attribute">
<dt id="mangadap.survey.drpcomplete.DRPComplete.platelist">
<code class="descname">platelist</code><a class="headerlink" href="#mangadap.survey.drpcomplete.DRPComplete.platelist" title="Permalink to this definition">Â¶</a></dt>
<dd><p><em>list</em> â List of plates to search for, see above.</p>
</dd></dl>

<dl class="attribute">
<dt id="mangadap.survey.drpcomplete.DRPComplete.ifudesignlist">
<code class="descname">ifudesignlist</code><a class="headerlink" href="#mangadap.survey.drpcomplete.DRPComplete.ifudesignlist" title="Permalink to this definition">Â¶</a></dt>
<dd><p><em>list</em> â List of IFU designs to search for, see
above.</p>
</dd></dl>

<dl class="attribute">
<dt id="mangadap.survey.drpcomplete.DRPComplete.platetargets">
<code class="descname">platetargets</code><a class="headerlink" href="#mangadap.survey.drpcomplete.DRPComplete.platetargets" title="Permalink to this definition">Â¶</a></dt>
<dd><p><em>numpy.ndarray</em> â List of platetargets files to
search through, see above</p>
</dd></dl>

<dl class="attribute">
<dt id="mangadap.survey.drpcomplete.DRPComplete.catid">
<code class="descname">catid</code><a class="headerlink" href="#mangadap.survey.drpcomplete.DRPComplete.catid" title="Permalink to this definition">Â¶</a></dt>
<dd><p><em>numpy.ndarray</em> â List of target catalog IDs, see above</p>
</dd></dl>

<dl class="attribute">
<dt id="mangadap.survey.drpcomplete.DRPComplete.drpver">
<code class="descname">drpver</code><a class="headerlink" href="#mangadap.survey.drpcomplete.DRPComplete.drpver" title="Permalink to this definition">Â¶</a></dt>
<dd><p><em>str</em> â DRP version, see above.</p>
</dd></dl>

<dl class="attribute">
<dt id="mangadap.survey.drpcomplete.DRPComplete.redux_path">
<code class="descname">redux_path</code><a class="headerlink" href="#mangadap.survey.drpcomplete.DRPComplete.redux_path" title="Permalink to this definition">Â¶</a></dt>
<dd><p><em>str</em> â Path to the top level of directory for the
DRP output, see above.</p>
</dd></dl>

<dl class="attribute">
<dt id="mangadap.survey.drpcomplete.DRPComplete.dapver">
<code class="descname">dapver</code><a class="headerlink" href="#mangadap.survey.drpcomplete.DRPComplete.dapver" title="Permalink to this definition">Â¶</a></dt>
<dd><p><em>str</em> â DAP version, see above.</p>
</dd></dl>

<dl class="attribute">
<dt id="mangadap.survey.drpcomplete.DRPComplete.analysis_path">
<code class="descname">analysis_path</code><a class="headerlink" href="#mangadap.survey.drpcomplete.DRPComplete.analysis_path" title="Permalink to this definition">Â¶</a></dt>
<dd><p><em>str</em> â Path to the top level directory for the
DAP output files, see above.</p>
</dd></dl>

<dl class="attribute">
<dt id="mangadap.survey.drpcomplete.DRPComplete.directory_path">
<code class="descname">directory_path</code><a class="headerlink" href="#mangadap.survey.drpcomplete.DRPComplete.directory_path" title="Permalink to this definition">Â¶</a></dt>
<dd><p><em>str</em> â Direct path to the output file produced
using
<a class="reference internal" href="mangadap.config.defaults.html#mangadap.config.defaults.default_dap_common_path" title="mangadap.config.defaults.default_dap_common_path"><code class="xref py py-func docutils literal notranslate"><span class="pre">mangadap.config.defaults.default_dap_common_path()</span></code></a></p>
</dd></dl>

<dl class="attribute">
<dt id="mangadap.survey.drpcomplete.DRPComplete.readonly">
<code class="descname">readonly</code><a class="headerlink" href="#mangadap.survey.drpcomplete.DRPComplete.readonly" title="Permalink to this definition">Â¶</a></dt>
<dd><p><em>bool</em> â Flag that the drpcomplete fits file is only
opened for reading, not for updating.</p>
</dd></dl>

<dl class="attribute">
<dt id="mangadap.survey.drpcomplete.DRPComplete.hdu">
<code class="descname">hdu</code><a class="headerlink" href="#mangadap.survey.drpcomplete.DRPComplete.hdu" title="Permalink to this definition">Â¶</a></dt>
<dd><p><a class="reference external" href="http://docs.astropy.org/en/v1.0.2/io/fits/api/hdulists.html">astropy.io.fits.hdu.hdulist.HDUList</a> â Fits data with
binary table data.</p>
</dd></dl>

<dl class="attribute">
<dt id="mangadap.survey.drpcomplete.DRPComplete.nobs">
<code class="descname">nobs</code><a class="headerlink" href="#mangadap.survey.drpcomplete.DRPComplete.nobs" title="Permalink to this definition">Â¶</a></dt>
<dd><p><em>int</em> â Number of observations in the file</p>
</dd></dl>

<dl class="method">
<dt id="mangadap.survey.drpcomplete.DRPComplete._all_data_exists">
<code class="descname">_all_data_exists</code><span class="sig-paren">(</span><em>quiet=True</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/mangadap/survey/drpcomplete.html#DRPComplete._all_data_exists"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mangadap.survey.drpcomplete.DRPComplete._all_data_exists" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Determines if the data for all the plates/ifudesigns selected in
the current compilation is already present in the current
drpcomplete fits file.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>quiet</strong> (<em>bool</em>) â (<strong>Optional</strong>) Suppress output</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">Flag that all data has already been collated for the
requested plate/ifudesign list.</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body">bool</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="mangadap.survey.drpcomplete.DRPComplete._confirm_access">
<code class="descname">_confirm_access</code><span class="sig-paren">(</span><em>reread=False</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/mangadap/survey/drpcomplete.html#DRPComplete._confirm_access"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mangadap.survey.drpcomplete.DRPComplete._confirm_access" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Check the drpcomplete fits file at <a class="reference internal" href="#mangadap.survey.drpcomplete.DRPComplete.file_path" title="mangadap.survey.drpcomplete.DRPComplete.file_path"><code class="xref py py-func docutils literal notranslate"><span class="pre">file_path()</span></code></a> is
accessible, and read the data if not yet read.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>reread</strong> (<em>bool</em>) â (<strong>Optional</strong>) Force the file to be re-read</td>
</tr>
<tr class="field-even field"><th class="field-name">Raises:</th><td class="field-body"><code class="xref py py-exc docutils literal notranslate"><span class="pre">FileNotFoundError</span></code> â Raised if the drpcomplete fits file does
not exist.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="mangadap.survey.drpcomplete.DRPComplete._drp_info">
<code class="descname">_drp_info</code><span class="sig-paren">(</span><em>drplist</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/mangadap/survey/drpcomplete.html#DRPComplete._drp_info"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mangadap.survey.drpcomplete.DRPComplete._drp_info" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Grab the MaNGA IDs and object coordinates from the DRP fits
files.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>drplist</strong> (<em>list</em>) â List of <a class="reference internal" href="mangadap.drpfits.html#mangadap.drpfits.DRPFits" title="mangadap.drpfits.DRPFits"><code class="xref py py-class docutils literal notranslate"><span class="pre">mangadap.drpfits.DRPFits</span></code></a>
objects</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">Three arrays with, respectively, the MaNGA IDs
from the headers of the DRP fits files, the object right
ascension, and the object declination.</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body">numpy.array</td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">This takes far too long; either astropy.io.fits is reading
the entire file instead of just the header, or the slowdown
is because the DRP files are compressed.</p>
</div>
</dd></dl>

<dl class="method">
<dt id="mangadap.survey.drpcomplete.DRPComplete._drp_mangaid">
<code class="descname">_drp_mangaid</code><span class="sig-paren">(</span><em>drplist</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/mangadap/survey/drpcomplete.html#DRPComplete._drp_mangaid"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mangadap.survey.drpcomplete.DRPComplete._drp_mangaid" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Grab the MaNGA IDs from the DRP fits files.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>drplist</strong> (<em>list</em>) â List of <a class="reference internal" href="mangadap.drpfits.html#mangadap.drpfits.DRPFits" title="mangadap.drpfits.DRPFits"><code class="xref py py-class docutils literal notranslate"><span class="pre">mangadap.drpfits.DRPFits</span></code></a>
objects</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">Array with the MaNGA IDs from the headers of
the DRP fits files.</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body">numpy.array</td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">This takes far too long; either astropy.io.fits is reading
the entire file instead of just the header, or the slowdown
is because the DRP files are compressed.</p>
</div>
</dd></dl>

<dl class="method">
<dt id="mangadap.survey.drpcomplete.DRPComplete._find_completed_reductions">
<code class="descname">_find_completed_reductions</code><span class="sig-paren">(</span><em>mindesign=19</em>, <em>combinatorics=False</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/mangadap/survey/drpcomplete.html#DRPComplete._find_completed_reductions"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mangadap.survey.drpcomplete.DRPComplete._find_completed_reductions" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Search the DRP path for reduced CUBE files.</p>
<p>Function allows for one or both of <a class="reference internal" href="#mangadap.survey.drpcomplete.DRPComplete.platelist" title="mangadap.survey.drpcomplete.DRPComplete.platelist"><code class="xref py py-attr docutils literal notranslate"><span class="pre">platelist</span></code></a> and
<a class="reference internal" href="#mangadap.survey.drpcomplete.DRPComplete.ifudesignlist" title="mangadap.survey.drpcomplete.DRPComplete.ifudesignlist"><code class="xref py py-attr docutils literal notranslate"><span class="pre">ifudesignlist</span></code></a> to be None.  The behavior is:</p>
<blockquote>
<div><ul class="simple">
<li>If both are None, all available CUBE files are used to
create <a class="reference internal" href="#mangadap.survey.drpcomplete.DRPComplete.platelist" title="mangadap.survey.drpcomplete.DRPComplete.platelist"><code class="xref py py-attr docutils literal notranslate"><span class="pre">platelist</span></code></a> and <a class="reference internal" href="#mangadap.survey.drpcomplete.DRPComplete.ifudesignlist" title="mangadap.survey.drpcomplete.DRPComplete.ifudesignlist"><code class="xref py py-attr docutils literal notranslate"><span class="pre">ifudesignlist</span></code></a>.</li>
<li>If one is None, all available CUBE files within the
provided list of the one that is not None are used to
create <a class="reference internal" href="#mangadap.survey.drpcomplete.DRPComplete.platelist" title="mangadap.survey.drpcomplete.DRPComplete.platelist"><code class="xref py py-attr docutils literal notranslate"><span class="pre">platelist</span></code></a> and <a class="reference internal" href="#mangadap.survey.drpcomplete.DRPComplete.ifudesignlist" title="mangadap.survey.drpcomplete.DRPComplete.ifudesignlist"><code class="xref py py-attr docutils literal notranslate"><span class="pre">ifudesignlist</span></code></a>.  E.g.,
if <a class="reference internal" href="#mangadap.survey.drpcomplete.DRPComplete.platelist" title="mangadap.survey.drpcomplete.DRPComplete.platelist"><code class="xref py py-attr docutils literal notranslate"><span class="pre">platelist</span></code></a> =[7443] and <a class="reference internal" href="#mangadap.survey.drpcomplete.DRPComplete.ifudesignlist" title="mangadap.survey.drpcomplete.DRPComplete.ifudesignlist"><code class="xref py py-attr docutils literal notranslate"><span class="pre">ifudesignlist</span></code></a> is
None, all CUBE files with plate=7443 are chosen.</li>
<li>If both are not None and they have different lengths, or
the same length and combinatorics is True, all available
CUBE files within the constraints of both lists are
selected. E.g., if <a class="reference internal" href="#mangadap.survey.drpcomplete.DRPComplete.platelist" title="mangadap.survey.drpcomplete.DRPComplete.platelist"><code class="xref py py-attr docutils literal notranslate"><span class="pre">platelist</span></code></a> =[7443,7495] and
<a class="reference internal" href="#mangadap.survey.drpcomplete.DRPComplete.ifudesignlist" title="mangadap.survey.drpcomplete.DRPComplete.ifudesignlist"><code class="xref py py-attr docutils literal notranslate"><span class="pre">ifudesignlist</span></code></a> =[12704], the CUBE files with
(plate,ifudesign)=[(7443,12704),(7459,12704)] are chosen.</li>
<li>If both are not None and they have the same length and
combinatorics is False, all available CUBE files in the
matched lists are chosen.  E.g. if <a class="reference internal" href="#mangadap.survey.drpcomplete.DRPComplete.platelist" title="mangadap.survey.drpcomplete.DRPComplete.platelist"><code class="xref py py-attr docutils literal notranslate"><span class="pre">platelist</span></code></a>
=[7443,7495] and <a class="reference internal" href="#mangadap.survey.drpcomplete.DRPComplete.ifudesignlist" title="mangadap.survey.drpcomplete.DRPComplete.ifudesignlist"><code class="xref py py-attr docutils literal notranslate"><span class="pre">ifudesignlist</span></code></a> =[12704,12703], the
CUBE files with
(plate,ifudesign)=[(7443,12704),(7459,12703) are chosen</li>
</ul>
</div></blockquote>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>mindesign</strong> (<em>int</em>) â <p>(<strong>Optional</strong>) Minimum bundle design to
consider.  The bundle design is determined by
ifudesign/100, such that:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">if</span> <span class="n">mindesign</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">b</span><span class="o">/</span><span class="mi">100</span> <span class="o">&lt;</span> <span class="n">mindesign</span><span class="p">:</span>
    <span class="k">continue</span>
</pre></div>
</div>
<p>a DRP file is ignored.  Default only ignores the
minibundles (design=7).</p>
</li>
<li><strong>combinatorics</strong> (<em>bool</em>) â (<strong>Optional</strong>) Create <a class="reference internal" href="#mangadap.survey.drpcomplete.DRPComplete.platelist" title="mangadap.survey.drpcomplete.DRPComplete.platelist"><code class="xref py py-attr docutils literal notranslate"><span class="pre">platelist</span></code></a>
and <a class="reference internal" href="#mangadap.survey.drpcomplete.DRPComplete.ifudesignlist" title="mangadap.survey.drpcomplete.DRPComplete.ifudesignlist"><code class="xref py py-attr docutils literal notranslate"><span class="pre">ifudesignlist</span></code></a> by determining all possible
combinations of the input values. See above.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">Two lists with the available plates and ifudesigns for
which to collect data.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">list</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="mangadap.survey.drpcomplete.DRPComplete._find_modes">
<code class="descname">_find_modes</code><span class="sig-paren">(</span><em>drplist</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/mangadap/survey/drpcomplete.html#DRPComplete._find_modes"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mangadap.survey.drpcomplete.DRPComplete._find_modes" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Using the provided list of CUBE DRP files, find if the RSS mode
is also available.</p>
<p>Currently only two modes are possible:</p>
<blockquote>
<div><ul class="simple">
<li>modes[i] = 1 -&gt; only âCUBEâ file are available</li>
<li>modes[i] = 2 -&gt; both âCUBEâ and âRSSâ files are available</li>
</ul>
</div></blockquote>
<div class="admonition-todo admonition" id="index-0">
<p class="first admonition-title">Todo</p>
<ul class="last simple">
<li>Allow for there to be <em>only</em> âRSSâ files.</li>
</ul>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>drplist</strong> (<em>list</em>) â List of <a class="reference internal" href="mangadap.drpfits.html#mangadap.drpfits.DRPFits" title="mangadap.drpfits.DRPFits"><code class="xref py py-class docutils literal notranslate"><span class="pre">mangadap.drpfits.DRPFits</span></code></a>
objects</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">Array of modes for each input DRP file.</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body">numpy.array</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="mangadap.survey.drpcomplete.DRPComplete._match_platetargets">
<code class="descname">_match_platetargets</code><span class="sig-paren">(</span><em>quiet=True</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/mangadap/survey/drpcomplete.html#DRPComplete._match_platetargets"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mangadap.survey.drpcomplete.DRPComplete._match_platetargets" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Read the platetargets files and match the data therein to the
completed DRP files based on the plate and ifudesign.</p>
<p>If a plate-ifudesign combination is not found in the
plateTargets file, the other parameter values are set to -9999
and the MaNGA ID is set to NULL.</p>
<p>If the plate-ifudesign combination is found, the columns in the
plateTargets files that the code expects to find are âplateâ,
âifudesignâ, âmangaidâ, âobject_raâ, and âobject_decâ; the
values that will be replaced with âNULLâ (str) or -9999 (int or
float) if they do not exist are ânsa_versionâ, ânsa_idâ,
âmanga_target1â, âmanga_target3â, ânsa_redshiftâ,
ânsa_sersic_baâ, ânsa_sersic_phiâ, ânsa_sersic_th50â,
ânsa_vdispâ.</p>
<div class="admonition-todo admonition" id="index-1">
<p class="first admonition-title">Todo</p>
<ul class="last simple">
<li>Instead of searching through all files for the correct
plate-ifudesign, use the MaNGA ID to get the correct
catalog?  Requires getting the MaNGA ID from somewhere,
but it takes a long time to read from the fits filesâ¦</li>
<li>Is there some more concise method of performing the same
thing as what is done below with many try/except blocks?</li>
</ul>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>quiet</strong> (<em>bool</em>) â (<strong>Optional</strong>) Suppress terminal output</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">14 arrays with: MaNGA ID, object right
ascension, object declination, catalog ID, index of the
entry in the catalog, catalog version, ID of object in the
catalog, main MaNGA survey target bitmask, ancillary MaNGA
survey target bitmask, velocity, velocity dispersion,
ellipticity, position angle, and effective radius.</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body">numpy.array</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="mangadap.survey.drpcomplete.DRPComplete._read">
<code class="descname">_read</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/mangadap/survey/drpcomplete.html#DRPComplete._read"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mangadap.survey.drpcomplete.DRPComplete._read" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Read the data in the existing file at <a class="reference internal" href="#mangadap.survey.drpcomplete.DRPComplete.file_path" title="mangadap.survey.drpcomplete.DRPComplete.file_path"><code class="xref py py-func docutils literal notranslate"><span class="pre">file_path()</span></code></a>.</p>
</dd></dl>

<dl class="method">
<dt id="mangadap.survey.drpcomplete.DRPComplete._read_platetargets">
<code class="descname">_read_platetargets</code><span class="sig-paren">(</span><em>quiet=True</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/mangadap/survey/drpcomplete.html#DRPComplete._read_platetargets"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mangadap.survey.drpcomplete.DRPComplete._read_platetargets" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Read all the platetargets files using <a class="reference external" href="http://pydl.readthedocs.io/en/stable/api/pydl.pydlutils.yanny.yanny.html">pydl.pydlutils.yanny</a>
and return a list of yanny structures.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>quiet</strong> (<em>bool</em>) â (<strong>Optional</strong>) Suppress terminal output (NOT USED)</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">A list of yanny structures, one per platetargets file.</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body">list</td>
</tr>
<tr class="field-even field"><th class="field-name">Raises:</th><td class="field-body"><code class="xref py py-exc docutils literal notranslate"><span class="pre">FileNotFoundError</span></code> â Raised if cannot open one or more
platetargets files.</td>
</tr>
</tbody>
</table>
<div class="admonition-todo admonition" id="index-2">
<p class="first admonition-title">Todo</p>
<p class="last">This should be made more efficient by collating the required
plateTargets data into a single record array!</p>
</div>
</dd></dl>

<dl class="method">
<dt id="mangadap.survey.drpcomplete.DRPComplete._read_redshift_fix">
<code class="descname">_read_redshift_fix</code><span class="sig-paren">(</span><em>quiet=True</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/mangadap/survey/drpcomplete.html#DRPComplete._read_redshift_fix"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mangadap.survey.drpcomplete.DRPComplete._read_redshift_fix" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Read data from the $MANGADAP_DIR/data/fix/redshift_fix.par file,
if it exists.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>quiet</strong> (<em>bool</em>) â (<strong>Optional</strong>) Suppress terminal output (NOT USED)</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">A yanny structure with the redshift fixes.  Returns
None and raises a warning if the file does not exist.</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body">yanny</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="mangadap.survey.drpcomplete.DRPComplete._write_parameter_list">
<code class="descname">_write_parameter_list</code><span class="sig-paren">(</span><em>ostream</em>, <em>index</em>, <em>mode</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/mangadap/survey/drpcomplete.html#DRPComplete._write_parameter_list"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mangadap.survey.drpcomplete.DRPComplete._write_parameter_list" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Write a DAPPAR entry to the SDSS-style parameter file.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>ostream</strong> (<em>_io.TextIOWrapper</em>) â File stream for output</li>
<li><strong>index</strong> (<em>int</em>) â Index of the entry in <code class="xref py py-attr docutils literal notranslate"><span class="pre">data</span></code> to write</li>
<li><strong>mode</strong> (<em>int</em>) â Mode of the entry; see <a class="reference internal" href="#mangadap.survey.drpcomplete.DRPComplete._find_modes" title="mangadap.survey.drpcomplete.DRPComplete._find_modes"><code class="xref py py-func docutils literal notranslate"><span class="pre">_find_modes()</span></code></a></li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="mangadap.survey.drpcomplete.DRPComplete._write_parameter_struct">
<code class="descname">_write_parameter_struct</code><span class="sig-paren">(</span><em>ostream</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/mangadap/survey/drpcomplete.html#DRPComplete._write_parameter_struct"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mangadap.survey.drpcomplete.DRPComplete._write_parameter_struct" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Write the structure of the DAP SDSS-style parameter set to a
file.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>ostream</strong> (<em>_io.TextIOWrapper</em>) â File stream for output</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="mangadap.survey.drpcomplete.DRPComplete.can_analyze">
<code class="descname">can_analyze</code><span class="sig-paren">(</span><em>row=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/mangadap/survey/drpcomplete.html#DRPComplete.can_analyze"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mangadap.survey.drpcomplete.DRPComplete.can_analyze" title="Permalink to this definition">Â¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="mangadap.survey.drpcomplete.DRPComplete.entry_index">
<code class="descname">entry_index</code><span class="sig-paren">(</span><em>plate</em>, <em>ifudesign</em>, <em>reread=False</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/mangadap/survey/drpcomplete.html#DRPComplete.entry_index"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mangadap.survey.drpcomplete.DRPComplete.entry_index" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Find the index of the row with the parameter data for the
specified plate and ifudesign.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>plate</strong> (<em>int</em>) â Plate number</li>
<li><strong>ifudesign</strong> (<em>int</em>) â IFU design</li>
<li><strong>reread</strong> (<em>bool</em>) â (<strong>Optional</strong>) Force the database to be re-read</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">Index of the row in <code class="xref py py-attr docutils literal notranslate"><span class="pre">data</span></code> with the data for the
given <em>plate</em> and <em>ifudesign</em></p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first">int</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Raises:</th><td class="field-body"><p class="first last"><code class="xref py py-exc docutils literal notranslate"><span class="pre">Exception</span></code> â Raised if the given <em>plate</em> and <em>ifudesign</em> were
not found.</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="mangadap.survey.drpcomplete.DRPComplete.file_name">
<code class="descname">file_name</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/mangadap/survey/drpcomplete.html#DRPComplete.file_name"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mangadap.survey.drpcomplete.DRPComplete.file_name" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Return the name of the DRP complete database.</p>
</dd></dl>

<dl class="method">
<dt id="mangadap.survey.drpcomplete.DRPComplete.file_path">
<code class="descname">file_path</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/mangadap/survey/drpcomplete.html#DRPComplete.file_path"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mangadap.survey.drpcomplete.DRPComplete.file_path" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Return the full pat to the DRP complete database.</p>
</dd></dl>

<dl class="method">
<dt id="mangadap.survey.drpcomplete.DRPComplete.grab_data">
<code class="descname">grab_data</code><span class="sig-paren">(</span><em>plate=None</em>, <em>ifudesign=None</em>, <em>index=None</em>, <em>reread=False</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/mangadap/survey/drpcomplete.html#DRPComplete.grab_data"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mangadap.survey.drpcomplete.DRPComplete.grab_data" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Return the data for a given plate-ifudesign, or index in the
<code class="xref py py-attr docutils literal notranslate"><span class="pre">data</span></code>.  Even though <em>plate</em>, <em>ifudesign</em>, and <em>index</em> are
all optional, the arguments must contain either <em>plate</em> and
<em>ifudesign</em> or <em>index</em>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>plate</strong> (<em>int</em>) â (<strong>Optional</strong>) Plate number</li>
<li><strong>ifudesign</strong> (<em>int</em>) â (<strong>Optional</strong>) IFU design</li>
<li><strong>index</strong> (<em>int</em>) â (<strong>Optional</strong>) Index of the row in <code class="xref py py-attr docutils literal notranslate"><span class="pre">data</span></code>
with the data to return</li>
<li><strong>reread</strong> (<em>bool</em>) â (<strong>Optional</strong>) Force the database to be re-read</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">List of the 14 elements of <code class="xref py py-attr docutils literal notranslate"><span class="pre">data</span></code>; see
<a class="reference internal" href="#mangadap.survey.drpcomplete.DRPComplete.write" title="mangadap.survey.drpcomplete.DRPComplete.write"><code class="xref py py-func docutils literal notranslate"><span class="pre">write()</span></code></a>.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first">list</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Raises:</th><td class="field-body"><p class="first last"><code class="xref py py-exc docutils literal notranslate"><span class="pre">ValueError</span></code> â Raised if the row with the data is unknown
because either <em>index</em> is not defined or one or both of
<em>plate</em> and <em>ifudesign</em> is not defined.  Also raised if
<em>index</em> does not exist in the data array.</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="mangadap.survey.drpcomplete.DRPComplete.update">
<code class="descname">update</code><span class="sig-paren">(</span><em>platelist=None</em>, <em>ifudesignlist=None</em>, <em>combinatorics=False</em>, <em>force=False</em>, <em>alldrp=False</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/mangadap/survey/drpcomplete.html#DRPComplete.update"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mangadap.survey.drpcomplete.DRPComplete.update" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Update the DRP complete file.</p>
<p>If <em>platelist</em> and/or <em>ifudesignlist</em> are provided, the existing
<a class="reference internal" href="#mangadap.survey.drpcomplete.DRPComplete.platelist" title="mangadap.survey.drpcomplete.DRPComplete.platelist"><code class="xref py py-attr docutils literal notranslate"><span class="pre">platelist</span></code></a> and <a class="reference internal" href="#mangadap.survey.drpcomplete.DRPComplete.ifudesignlist" title="mangadap.survey.drpcomplete.DRPComplete.ifudesignlist"><code class="xref py py-attr docutils literal notranslate"><span class="pre">ifudesignlist</span></code></a> attributes are
replaced.</p>
<p>If <em>platelist</em> and <em>ifudesignlist</em> do not have the same length
or <em>combinatorics</em> is True, the lists are expanded to include
all combinations of their elements.</p>
<p>If <em>platelist</em> and <em>ifudesignlist</em> are None or <em>alldrp</em> is True,
all available plates/ifudesigns are collected from within the
DRP directory structure.</p>
<p>If the result of <a class="reference internal" href="#mangadap.survey.drpcomplete.DRPComplete.file_path" title="mangadap.survey.drpcomplete.DRPComplete.file_path"><code class="xref py py-func docutils literal notranslate"><span class="pre">file_path()</span></code></a> does not exist, it is
created.</p>
<p>If the result of <a class="reference internal" href="#mangadap.survey.drpcomplete.DRPComplete.file_path" title="mangadap.survey.drpcomplete.DRPComplete.file_path"><code class="xref py py-func docutils literal notranslate"><span class="pre">file_path()</span></code></a> does exist, the available
plates and ifudesigns in the file are compared against the list
(provided or collected) to update.  If the lists differ, the
drpcomplete fits file is re-created from scratch.  If all the
plates and ifudesigns are available, nothing is done, unless
force=True.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>platelist</strong> (<em>str</em><em> or </em><em>list</em>) â (<strong>Optional</strong>) List of plates to
include in the drpcomplete fits file.</li>
<li><strong>ifudesignlist</strong> (<em>str</em><em> or </em><em>list</em>) â (<strong>Optional</strong>) List of ifudesigns
to include in the drpcomplete fits file.</li>
<li><strong>combinatorics</strong> (<em>bool</em>) â (<strong>Optional</strong>) Determine all combinations
of the entered plates and ifudesigns.</li>
<li><strong>force</strong> (<em>bool</em>) â (<strong>Optional</strong>) Overwrite any existing drpcomplete
fits file with a new one built from scratch.</li>
<li><strong>alldrp</strong> (<em>bool</em>) â (<strong>Optional</strong>) Find the full list of available
DRP files.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Raises:</th><td class="field-body"><p class="first last"><code class="xref py py-exc docutils literal notranslate"><span class="pre">AttributeError</span></code> â Raised if drpcomplete fits file was opened
in read-only mode.</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="mangadap.survey.drpcomplete.DRPComplete.write">
<code class="descname">write</code><span class="sig-paren">(</span><em>platelist</em>, <em>ifudesignlist</em>, <em>modes</em>, <em>mangaid</em>, <em>objra</em>, <em>objdec</em>, <em>catid</em>, <em>catindx</em>, <em>trg_version</em>, <em>trg_id</em>, <em>manga_trg1</em>, <em>manga_trg3</em>, <em>vel</em>, <em>veldisp</em>, <em>ell</em>, <em>pa</em>, <em>Reff</em>, <em>drpver=None</em>, <em>redux_path=None</em>, <em>dapver=None</em>, <em>analysis_path=None</em>, <em>clobber=True</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/mangadap/survey/drpcomplete.html#DRPComplete.write"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mangadap.survey.drpcomplete.DRPComplete.write" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Write the drpcomplete fits binary table.</p>
<dl class="docutils">
<dt>Header keywords are:</dt>
<dd><ul class="first last simple">
<li>VERSDRP: DRP version</li>
<li>RDXPTH: DRP reduction path</li>
<li>VERSDAP: DAP version</li>
<li>SISPTH: DAP analysis path</li>
<li>PLTTRG <em>N</em>: plateTargets file <em>N</em></li>
<li>CATID <em>N</em>: ID Number of target catalog <em>N</em></li>
<li>AUTHOR: Set to âK.B. Westfall &lt;<a class="reference external" href="mailto:kbwestfall&#37;&#52;&#48;gmail&#46;com">kbwestfall<span>&#64;</span>gmail<span>&#46;</span>com</a>&gt;â</li>
</ul>
</dd>
<dt>Binary table columns:</dt>
<dd><ol class="first last arabic simple">
<li>PLATE (1J): Plate number</li>
<li>IFUDESIGN (1J): IFU design</li>
<li><dl class="first docutils">
<dt>MODES (1B): Modes available</dt>
<dd><ul class="first last">
<li>MODES=1: only âCUBEâ file is available</li>
<li>MODES=2: both âCUBEâ and âRSSâ files are available</li>
</ul>
</dd>
</dl>
</li>
<li>MANGAID (<em>n</em> A): MaNGA ID (same as âCATID-CATINDXâ)</li>
<li>OBJRA (1D): Object right ascension</li>
<li>OBJDEC (1D): Object declination</li>
<li>CATID (1J): Catalog ID used for target selection</li>
<li>CATINDX (1J): Index in catalog with target data</li>
<li><dl class="first docutils">
<dt>TRG_VERSION (<em>n</em> A): Version of the catalog (e.g., NSA)</dt>
<dd>used in targetting (def=âNULLâ if not available)</dd>
</dl>
</li>
<li>TRG_ID (1J): Target ID in catalog (def=-9999 if not
available)</li>
<li>MANGA_TARGET1: Main MaNGA survey target bitmask</li>
<li>MANGA_TARGET3: Ancillary MaNGA survey target bitmask</li>
<li>VEL (1D): Systemic velocity from catalog (def=-9999.0 if
not available)</li>
<li>VDISP (1D): Velocity dispersion from catalog
(def=-9999.0 if not available)</li>
<li>ELL (1D): Ellipticity (1-b/a) from catalog (def=-9999.0
if not available); Elliptical Petrosian value from NSA</li>
<li>PA (1D): Position angle from catalog (def=-9999.0 if not
available); Elliptical Petrosian value from NSA</li>
<li>REFF (1D): Effective radius from catalog (def=-9999.0 if
not available); Elliptical Petrosian value from NSA</li>
</ol>
</dd>
</dl>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>platelist</strong> (<em>list</em>) â List of plates</li>
<li><strong>ifudesignlist</strong> (<em>list</em>) â List of IFU designs</li>
<li><strong>modes</strong> (<em>numpy.array</em>) â Mode values, see above</li>
<li><strong>mangaid</strong> (<em>numpy.array</em>) â MaNGA IDs</li>
<li><strong>objra</strong> (<em>numpy.array</em>) â Object right ascensions</li>
<li><strong>objdec</strong> (<em>numpy.array</em>) â Object declinations</li>
<li><strong>catid</strong> (<em>numpy.array</em>) â Catalog ID used for target selection</li>
<li><strong>catindx</strong> (<em>numpy.array</em>) â Index in catalog with target data</li>
<li><strong>trg_version</strong> (<em>numpy.array</em>) â Version of the catalog (e.g.,
NSA) used in targetting</li>
<li><strong>trg_id</strong> (<em>numpy.array</em>) â Target ID in catalog</li>
<li><strong>manga_trg1</strong> (<em>numpy.array</em>) â Main MaNGA survey target bitmask</li>
<li><strong>manga_trg3</strong> (<em>numpy.array</em>) â Ancillary MaNGA survey target
bitmask</li>
<li><strong>vel</strong> (<em>numpy.array</em>) â Velocity from catalog, if available</li>
<li><strong>veldisp</strong> (<em>numpy.array</em>) â Velocity dispersion from catalog,
if available</li>
<li><strong>ell</strong> (<em>numpy.array</em>) â Ellipticity (1-b/a) from catalog, if
available</li>
<li><strong>pa</strong> (<em>numpy.array</em>) â Position angle from catalog, if
available</li>
<li><strong>Reff</strong> (<em>numpy.array</em>) â Effective radius from catalog, if
available</li>
<li><strong>drpver</strong> (<em>str</em>) â (<strong>Optional</strong>) DRP version, see above.</li>
<li><strong>redux_path</strong> (<em>str</em>) â (<strong>Optional</strong>) Path to the top level of
directory for the DRP output, see above.</li>
<li><strong>dapver</strong> (<em>str</em>) â (<strong>Optional</strong>) DAP version, see above.</li>
<li><strong>analysis_path</strong> (<em>str</em>) â (<strong>Optional</strong>) Path to the top level
directory for the DAP output files, see above.</li>
<li><strong>clobber</strong> (<em>bool</em>) â (<strong>Optional</strong>) Overwrite any existing file.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Raises:</th><td class="field-body"><ul class="first last simple">
<li><code class="xref py py-exc docutils literal notranslate"><span class="pre">AttributeError</span></code> â Raised if drpcomplete fits file was opened
in read-only mode.</li>
<li><code class="xref py py-exc docutils literal notranslate"><span class="pre">FileExistsError</span></code> â Raised if the drpcomplete file exists and
clobber=False.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="mangadap.survey.drpcomplete.DRPComplete.write_par">
<code class="descname">write_par</code><span class="sig-paren">(</span><em>ofile</em>, <em>mode</em>, <em>plate=None</em>, <em>ifudesign=None</em>, <em>index=None</em>, <em>reread=False</em>, <em>clobber=True</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/mangadap/survey/drpcomplete.html#DRPComplete.write_par"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mangadap.survey.drpcomplete.DRPComplete.write_par" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Write the SDSS-style parameter (Yanny) file for use with the
MaNGA DAP.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>ofile</strong> (<em>str</em>) â Output file name</li>
<li><strong>mode</strong> (<em>str</em>) â Mode of the DRP file to analyze; must be either
âRSSâ or âCUBEâ</li>
<li><strong>plate</strong> (<em>int</em>) â (<strong>Optional</strong>) Plate number</li>
<li><strong>ifudesign</strong> (<em>int</em>) â (<strong>Optional</strong>) IFU design</li>
<li><strong>index</strong> (<em>int</em>) â (<strong>Optional</strong>) Index of the row in <code class="xref py py-attr docutils literal notranslate"><span class="pre">data</span></code>
with the data to return</li>
<li><strong>reread</strong> (<em>bool</em>) â (<strong>Optional</strong>) Force the database to be re-read</li>
<li><strong>clobber</strong> (<em>bool</em>) â (<strong>Optional</strong>) Overwrite any existing parameter
file</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Raises:</th><td class="field-body"><ul class="first last simple">
<li><code class="xref py py-exc docutils literal notranslate"><span class="pre">IOError</span></code> â Raised if the parameter file already exists and
clobber is False.</li>
<li><code class="xref py py-exc docutils literal notranslate"><span class="pre">ValueError</span></code> â Raised if<ul>
<li>the row with the data is unknown because either
<em>index</em> is not defined or one or both of <em>plate</em> and
<em>ifudesign</em> is not defined.</li>
<li><em>index</em> does not exist in the data array.</li>
<li>the âRSSâ mode is selected but unavailable</li>
</ul>
</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

</div>


           </div>
           <div class="articleComments">
            
           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="mangadap.survey.manga_dap.html" class="btn btn-neutral float-right" title="mangadap.survey.manga_dap module" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="mangadap.survey.dapall.html" class="btn btn-neutral" title="mangadap.survey.dapall module" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2018, SDSS-IV/MaNGA Pipeline Group.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'2.2.2',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>
      <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  
  
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>